<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>订单记录</title>
	<link rel="stylesheet" href="css/font-awesome.min.css"/>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/css.css">
	<script src="js/jquery-3.4.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/base64.js"></script>
	<script src="js/API.js"></script>
</head>
<style>
	.item{
		width: 400px;
		text-align: center;
		padding-bottom: 10px;
	}

	.item1{
		width: 200px;
		text-align: center;
		padding-bottom: 10px;
	}
</style>
<body>
	<div class="page">
		<header>
			<div class="back">
				<i class="fa fa-angle-left"></i>
			</div>
			<p>总充值明细</p>
			<span></span>
		</header>
		<div class="empty"></div>
		<div class="order" style="width: 100%; margin: auto;">
			<div  class="demo" style="width: 100%; display: flex; justify-content: center; align-items: center;">
				<!--<div style="width: 100%; text-align: center;" class="">订单号</div>-->
				<!--<div style="width: 100%; text-align: center;" class="">时间</div>-->
				<!--<div style="width: 100%; text-align: center;" class="">类型</div>-->
				<!--<div style="width: 100%; text-align: center;" class="">金额</div>-->
				<div class="item" >订单号</div>
				<div class="item1" >时间</div>
				<div class="item1" >类型</div>
				<div class="item1" >金额</div>
			</div>

			<div id="divData"></div>
			<!--<div  style="display: flex; justify-content: center;">-->
				<!--<div class="item" >P0292213123812312</div>-->
				<!--<div class="item1" >20200901</div>-->
				<!--<div class="item1" >成功</div>-->
				<!--<div class="item1" >5000</div>-->
			<!--</div>-->

			<!--<table  class="demo" style="width: 100%; display: flex; justify-content: center; align-items: center;">-->
				<!--<thead>-->
				   <!--<tr><div style="width: 100%; text-align: center;" class="">订单号</div></tr>-->
				   <!--<tr><div style="width: 100%; text-align: center;" class="">时间</div></tr>-->
				   <!--<tr><div style="width: 100%; text-align: center;" class="">类型</div></tr>-->
				   <!--<tr><div style="width: 100%; text-align: center;" class="">金额</div></tr>-->
				<!--</thead>-->
				<!--<tbody>-->
				  <!--<tr><div >P0292213123812312</div></tr>-->
				  <!--<tr><div >2020-09-01 11:12</div></tr>-->
				  <!--<tr><div >成功</div></tr>-->
				  <!--<tr><div >5000</div></tr>-->
				<!--</tbody>-->

		</div>
		<!--<div class="contant order_con">-->
			<!--<div class="data_null active">-->
				<!--<img src="./img/demo.jpg" alt="">-->
				<!--<p>1暂无数据</p>-->
			<!--</div>-->
			<!--<div class="data_null">-->
				<!--<img src="./img/demo.jpg" alt="">-->
				<!--<p>2暂无数据</p>-->
			<!--</div>-->
			<!--<div class="data_null">-->
				<!--<img src="./img/demo.jpg" alt="">-->
				<!--<p>3暂无数据</p>-->
			<!--</div>-->
			<!--<div class="data_null">-->
				<!--<img src="./img/demo.jpg" alt="">-->
				<!--<p>4暂无数据</p>-->
			<!--</div>-->
            <!---->
        <!--</div>-->
        <div style="width: 100%; position: fixed; bottom: 40px; height: 50px;">
            <!--<div style="width: 100%; display: flex; justify-content: center; align-items: center; height: 20px;">-->
				<!--<div style="width: 100%; text-align: right; height: 20px;">-->
				<!--</div>-->
				<!--<div style="width: 100%; text-align: right; height: 20px;">-->
				<!--</div>-->
				<!--<div style="width: 100%; text-align: center; height: 20px;">-->
					<!--<span style="float: left;">汇总：</span>-->
					<!--<span>0元</span>-->
				<!--</div>-->
			<!--</div>-->
            <!--<div style="width: 100%; text-align: center; margin-top: 10px; height: 20px;">-->
                <!--只显示三天的数据-->
            <!--</div>-->
        </div>
	</div>
</body>
<script type="text/javascript">

    $(function(){

        $(".back").on('click', function()  {
            window.location.href='my.html';
        });

        indexInit();

        function indexInit() {
            let timestamp = Date.parse(new Date());
            let base64 = `{"token": "111111","agtVer":${publicMap.get("agtVer")},"clientVer":${publicMap.get("clientVer")},"clientType":${publicMap.get("clientType")},"ctime": ${timestamp}}`;
            //        let base64 = `{"token": "${storage.getItem("yf_token")}","acType": ${acType},"businessType": ${businessType},"mmQrCode": "${mmQrCode}","wxQrCodeAds": "${wxQrCodeAds}","payee": "${payee}","acNum": "${acNum}","acName": "${acName}","password": "${password}","agtVer":${publicMap.get("agtVer")},"clientVer":${publicMap.get("clientVer")},"clientType":${publicMap.get("clientType")},"ctime": ${timestamp}}`;
            console.log("参数："+base64);
            let base = new Base64();
            let result = base.encode(base64);
            let jsonData = JSON.stringify({"jsonData":result});
            $.ajax({
                url: API+'/fine/recharge/getDataList',
                type: 'post',
                dataType: 'json',
                contentType:"application/json",
                data:jsonData,
                // 成功执行
                success (data) {
                    let code = data.resultCode;
                    if(code !== "0"){
                        alert(data.message);
                    }else {

                        let base64 = data.data.jsonData;
                        let base = new Base64();
                        let rsData= base.decode(base64);
                        let rsDataJson = JSON.parse(rsData);
                        if(rsDataJson.rowCount==0){//没有数据
                            onDataCallBack();
                            return;
                        }
                        Callback(rsDataJson.dataList);
                    }
                }
            })

        }

        function  onDataCallBack() {
            let  divHtml="";
            divHtml+="<div class=\"contant order_con\">";
            divHtml+="<div class=\"data_null active\">";
            divHtml+="<img src=\"./img/demo.jpg\" alt=\"\">";
            divHtml+="<p>暂无数据</p>";
            divHtml+="</div>";
            divHtml+="</div>";
            $("#divData").html(divHtml);
        }

        function  Callback(data){
            let  divHtml="";
            for(let i=0;i<data.length;i++){
				divHtml+="<div  style=\"display: flex; justify-content: center;\">";
//                console.log(data[i].distributionMoney+"======"+data[i].invalidTime+"====="+data[i].orderMoney+"===="+data[i].orderNo+"===="+data[i].orderStatus);
                divHtml+="<div class=\"item\" >"+data[i].orderNo.substr(0,15)+"</div>";
                divHtml+="<div class=\"item1\" >"+data[i].curday+""+data[i].curhour+""+data[i].curminute+"</div>";
                if(data[i].orderStatus==1){
                    divHtml+="<div class=\"item1\" >初始化</div>";
				}else if(data[i].orderStatus==2){
                    divHtml+="<div class=\"item1\" >超时</div>";
				}else if(data[i].orderStatus==3){
                    divHtml+="<div class=\"item1\" >成功</div>";
                }
//                divHtml+="<div class=\"item1\" >"+data[i].orderStatus+"</div>";
                divHtml+="<div class=\"item1\" >"+data[i].orderMoney+"</div>";
                divHtml+="</div>";
            }

            $("#divData").html(divHtml);
        }
    })





</script>
</html>